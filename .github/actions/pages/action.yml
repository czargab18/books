name: 'GitHub Pages - Books'
description: 'Deploy custom GitHub Pages for Books'
inputs:
  useremail:
    description: 'User email'
    required: true
  username:
    description: 'Repository owner'
    required: true
  token:
    description: 'Token for checkout'
    required: true
runs:
  using: 'composite'
  steps:
    - name: Checkout books
      uses: actions/checkout@v4
      with:
        repository: ${{ inputs.username }}/books
        token: ${{ inputs.token }}
        path: 'books'
        ref: 'main'

    - name: Clonar subm√≥dulo wss
      uses: actions/checkout@v4
      with:
        repository: ${{ inputs.username }}/wss
        token: ${{ inputs.token }}
        path: 'wss'
        ref: 'main'

    - name: Adiciona fonts
      run: |
        rsync -av --update wss/fonts.css books/book/wss/
        rsync -av --update wss/fonts books/book/wss/

    - name: Setup Pages
      uses: actions/configure-pages@v5

    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: books/book
        name: github-pages

    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
      with:
        token: ${{ github.token }}
        artifact_name: github-pages