
      - name: Renderizar livros Quarto
        if: steps.books-list.outputs.has_books == 'true'
        run: |
          LIVROS_LIST='${{ steps.books-list.outputs.livros }}'
          
          if [ -z "$LIVROS_LIST" ]; then
            echo "âš ï¸ Nenhum livro para renderizar"
            exit 0
          fi
          
          # Conta quantos livros
          NUM_LIVROS=$(echo "$LIVROS_LIST" | wc -w)
          echo "ğŸ“š Renderizando $NUM_LIVROS livro(s)..."
          
          # Contador de sucesso e falha
          SUCCESS_COUNT=0
          FAIL_COUNT=0
          
          for livro in $LIVROS_LIST; do
            if [ -d "books/build/$livro" ]; then
              echo ""
              echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
              echo "ğŸ“– Renderizando: $livro"
              echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
              
              if quarto render "books/build/$livro" --to html --execute --output-dir "./../../../book/$livro"; then
                echo "âœ… Sucesso: $livro"
                SUCCESS_COUNT=$((SUCCESS_COUNT + 1))
              else
                echo "âŒ Erro ao renderizar: $livro"
                FAIL_COUNT=$((FAIL_COUNT + 1))
              fi
            else
              echo "âš ï¸ Livro nÃ£o encontrado: $livro"
              FAIL_COUNT=$((FAIL_COUNT + 1))
            fi
          done
          
          echo ""
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“Š Resumo da RenderizaÃ§Ã£o"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "âœ… Sucesso: $SUCCESS_COUNT"
          echo "âŒ Falhas: $FAIL_COUNT"
          echo "ğŸ“š Total: $NUM_LIVROS"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          
          # ComparaÃ§Ã£o segura e saÃ­da explÃ­cita
          if [ "${FAIL_COUNT:-0}" -gt 0 ]; then
            echo "âš ï¸ Alguns livros falharam na renderizaÃ§Ã£o"
            exit 1
          else
            echo "âœ¨ RenderizaÃ§Ã£o concluÃ­da com sucesso!"
            exit 0
          fi

