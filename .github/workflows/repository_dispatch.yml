# Código gerado/assistido por Claude Sonnet 4
name: repository_dispatch - books
description: Dispara evento 'repository_dispatch' no repositório 'books' quando há push para main em arquivos específicos.

on:
  workflow_dispatch:
  push:
    branches: [main]
    paths: ["books/build/**/*.qmd",  "books/build/**/*.yml", "books/build/*.bib"]

permissions:
  contents: read
  actions: write

env:
  USERNAME: ${{ github.repository_owner }}
  TOKEN: ${{ secrets.TOKEN_REPO_SYNC }}

jobs:
  notifica-books:
    environment:
      name: ENVIRONMENT
    runs-on: ubuntu-latest
    steps:
      - name: Dispara 'repository_dispatch' no books
        uses: peter-evans/repository-dispatch@v3
        with:
          repository: ${{ env.USERNAME }}/estatistica
          token: ${{ env.TOKEN }}
          event-type: atualizar-books